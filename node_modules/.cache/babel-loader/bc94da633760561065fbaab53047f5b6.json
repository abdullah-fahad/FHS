{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState}from'react';import{useHistory}from'react-router';import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LogIn=function LogIn(){var history=useHistory();if(localStorage.getItem(\"role\")){if(localStorage.getItem(\"role\")===\"manager\"&&sessionStorage.getItem(\"loggedIn\")&&localStorage.getItem(\"userInfo\")){history.push(\"/manager\");}else if(localStorage.getItem(\"role\"===\"teacher\"&&sessionStorage.getItem(\"loggedIn\")&&localStorage.getItem(\"userInfo\"))){history.push(\"/teacher\");}}var _useState=useState(),_useState2=_slicedToArray(_useState,2),passcode=_useState2[0],setPasscode=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),reRender=_useState4[0],setReRender=_useState4[1];var passcodeChanged=function passcodeChanged(e){e.preventDefault();setPasscode(e.target.value);};var submit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/login',{passcode:passcode}).then(function(res){if(res.data.role===\"manager\"){localStorage.setItem(\"userInfo\",JSON.stringify({name:res.data.name,picture:res.data.picture}));localStorage.setItem(\"role\",\"manager\");sessionStorage.setItem(\"loggedIn\",\"true\");setReRender(1);}else if(res.data.role===\"teacher\"){localStorage.setItem(\"userInfo\",JSON.stringify({name:res.data.name,picture:res.data.picture}));localStorage.setItem(\"role\",\"teacher\");sessionStorage.setItem(\"loggedIn\",\"true\");setReRender(1);}});case 2:case\"end\":return _context.stop();}}},_callee);}));return function submit(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"big\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-form\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"login-form-header\",children:\"\\u0623\\u062F\\u062E\\u0644 \\u0631\\u0645\\u0632 \\u0627\\u0644\\u0645\\u0631\\u0648\\u0631 \\u0627\\u0644\\u062E\\u0627\\u0635 \\u0628\\u0643\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:passcodeChanged,className:\"form-control\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn text-light button\",onClick:submit,children:/*#__PURE__*/_jsx(\"span\",{children:\"\\u062F\\u062E\\u0648\\u0644\"})})]})]});};export default LogIn;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/logIn.js"],"names":["axios","React","useState","useHistory","LogIn","history","localStorage","getItem","sessionStorage","push","passcode","setPasscode","reRender","setReRender","passcodeChanged","e","preventDefault","target","value","submit","post","then","res","data","role","setItem","JSON","stringify","name","picture"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport './styles.css';\r\n \r\nvar LogIn = () => {\r\n    var history = useHistory();\r\n    if(localStorage.getItem(\"role\")){\r\n        if(localStorage.getItem(\"role\") === \"manager\" && sessionStorage.getItem(\"loggedIn\") && localStorage.getItem(\"userInfo\")){\r\n            history.push(`/manager`)\r\n        }\r\n        else if(localStorage.getItem(\"role\" === \"teacher\" && sessionStorage.getItem(\"loggedIn\") && localStorage.getItem(\"userInfo\"))){\r\n            history.push(`/teacher`)\r\n        }\r\n    }\r\n\r\n    var [passcode, setPasscode] = useState();\r\n    var [reRender, setReRender] = useState();\r\n\r\n    var passcodeChanged = (e) => {\r\n        e.preventDefault();\r\n        setPasscode(e.target.value);\r\n    }\r\n\r\n    var submit = async() => {\r\n        await axios.post('/login', {passcode: passcode}).then(res => {\r\n            if(res.data.role === \"manager\"){\r\n                localStorage.setItem(\"userInfo\", JSON.stringify({name: res.data.name, picture: res.data.picture}))\r\n                localStorage.setItem(\"role\", \"manager\")\r\n                sessionStorage.setItem(\"loggedIn\", \"true\")\r\n                setReRender(1)\r\n            }\r\n            else if(res.data.role === \"teacher\"){\r\n                localStorage.setItem(\"userInfo\", JSON.stringify({name: res.data.name, picture: res.data.picture}))\r\n                localStorage.setItem(\"role\", \"teacher\")\r\n                sessionStorage.setItem(\"loggedIn\", \"true\")\r\n                setReRender(1)\r\n            }\r\n        })\r\n    }\r\n    return(\r\n        <div className=\"big\">\r\n            <br /><br /><br />\r\n            <div className=\"login-form\">\r\n                <h1 className=\"login-form-header\">أدخل رمز المرور الخاص بك</h1>\r\n                <br />\r\n                <input type=\"number\" onChange={passcodeChanged} className=\"form-control\" />\r\n                <br />\r\n                <button className=\"btn text-light button\" onClick={submit}><span>دخول</span></button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default LogIn;"]},"metadata":{},"sourceType":"module"}