{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import'./styles.css';import Album from'./album';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var selectedPost;var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var posts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/get-news\").then(function(response){return posts=response.data;}).catch(function(err){return console.log(err);});case 2:return _context.abrupt(\"return\",posts);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref.apply(this,arguments);};}();var ShowPosts=function ShowPosts(){var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),reRender=_useState4[0],setReRender=_useState4[1];if(!posts){getPosts().then(function(res){return setPosts(res);});}var prettyPosts=[];if(posts){for(var x=posts.length;x>0;x--){console.log(x);prettyPosts.push(/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"post-img\",src:posts[x-1].picture}),/*#__PURE__*/_jsx(\"h3\",{className:\"post-thumb-title\",children:posts[x-1].title}),/*#__PURE__*/_jsxs(\"span\",{className:\"author1\",children:[\"\\u0645\\u0646 \",posts[x-1].author||\"مجهول\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"post-thumb-text\",children:posts[x-1].discraption}),/*#__PURE__*/_jsx(\"button\",{name:x-1,className:\"btn btn-success post-btn\",onClick:function onClick(e){history.push(\"/home/\".concat(posts[e.target.name]._id));},children:\"\\u0627\\u0642\\u0631\\u0623 \\u0627\\u0644\\u062E\\u0628\\u0631\"})]}));}}console.log(prettyPosts);return prettyPosts;};var Posts=function Posts(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{id:\"main\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"welcome\",children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u0645\\u0631\\u062D\\u0628\\u064B\\u0627 \\u0628\\u0643 \\u0641\\u064A \\u0627\\u0644\\u0645\\u0648\\u0642\\u0639 \\u0627\\u0644\\u0631\\u0633\\u0645\\u064A \\u0644\\u062B\\u0627\\u0646\\u0648\\u064A\\u0629 \\u0627\\u0644\\u0641\\u064A\\u0635\\u0644\\u064A\\u0629\",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/material-outlined/30/2C9EA4/sparkling.png\"})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0623\\u0644\\u0628\\u0648\\u0645 \\u0627\\u0644\\u0645\\u062F\\u0631\\u0633\\u0629\"}),/*#__PURE__*/_jsx(Album,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(ShowPosts,{})})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"postView\",className:\"hide\",children:[/*#__PURE__*/_jsx(\"h1\",{children:selectedPost?selectedPost.title:\"\"}),/*#__PURE__*/_jsx(\"img\",{src:selectedPost?selectedPost.picture:\"\"}),/*#__PURE__*/_jsx(\"p\",{children:selectedPost?selectedPost.content:\"\"})]})]});};export default Posts;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/posts.js"],"names":["React","useState","useHistory","axios","Album","selectedPost","getPosts","get","then","response","posts","data","catch","err","console","log","ShowPosts","history","setPosts","reRender","setReRender","res","prettyPosts","x","length","push","picture","title","author","discraption","e","target","name","_id","Posts","content"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport './styles.css';\r\nimport Album from './album';\r\nvar selectedPost;\r\nvar getPosts = async() => {\r\n    var posts;\r\n    await axios.get(\"/get-news\").then(response => posts = response.data).catch(err => console.log(err))\r\n    return posts;\r\n\r\n}\r\n\r\nvar ShowPosts = () => {\r\n    var history = useHistory(); \r\n    var [posts, setPosts] = useState();\r\n    var [reRender, setReRender] = useState();\r\n    if(!posts){getPosts().then(res => setPosts(res))}\r\n    var prettyPosts = []\r\n    if(posts){\r\n        for(var x = posts.length; x > 0; x--){\r\n            console.log(x)\r\n            prettyPosts.push(\r\n                <div className=\"post\">\r\n                    <img className=\"post-img\" src={posts[x-1].picture} /> \r\n                    <h3 className=\"post-thumb-title\">{posts[x-1].title}</h3>\r\n                    <span className=\"author1\">من {posts[x-1].author || \"مجهول\"}</span>\r\n                    <p className=\"post-thumb-text\">{posts[x-1].discraption}</p>\r\n                    <button name={x-1} className=\"btn btn-success post-btn\" onClick={(e) => {\r\n                        history.push(`/home/${posts[e.target.name]._id}`);\r\n                        }}>اقرأ الخبر</button>\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n    console.log(prettyPosts)\r\n    return prettyPosts;\r\n}\r\n\r\nvar Posts = () => {\r\n    return(\r\n        <>\r\n        <div id=\"main\">\r\n            <br />\r\n            <br />\r\n            <div className=\"welcome\">\r\n                <h3>مرحبًا بك في الموقع الرسمي لثانوية الفيصلية<img src=\"https://img.icons8.com/material-outlined/30/2C9EA4/sparkling.png\"/></h3>\r\n            </div>\r\n            <br />\r\n            <h4>ألبوم المدرسة</h4>\r\n            <Album />\r\n            <br />\r\n            <h4>المنشورات</h4>\r\n            <div>\r\n                <ShowPosts />\r\n            </div>\r\n        </div>\r\n        <div id=\"postView\" className=\"hide\">\r\n            <h1>{selectedPost? selectedPost.title:\"\"}</h1>\r\n            <img src={selectedPost? selectedPost.picture:\"\"} />\r\n            <p>{selectedPost? selectedPost.content:\"\"}</p>\r\n        </div>\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Posts;"]},"metadata":{},"sourceType":"module"}