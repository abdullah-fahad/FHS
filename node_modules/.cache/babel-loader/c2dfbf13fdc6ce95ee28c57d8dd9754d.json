{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{useParams,useHistory}from'react-router-dom';import NotAllowed from'./notAllowed';import axios from'axios';import{toast}from'react-toastify';import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var post;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(id);_context.next=3;return axios.post(\"/search\",{_id:id}).then(function(response){return post=response.data;}).catch(function(err){return console.log(err);});case 3:console.log(post);return _context.abrupt(\"return\",post);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPost(_x){return _ref.apply(this,arguments);};}();var EditPost=function EditPost(){var history=useHistory();var postId=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),postInfo=_useState4[0],setPostInfo=_useState4[1];if(!post&&!postInfo){getPost(postId.id).then(function(res){setPost(res);setPostInfo(res);console.log(postInfo);});}var titleChanged=function titleChanged(e){e.preventDefault();setPostInfo({title:e.target.value,discraption:postInfo.discraption,picture:postInfo.picture,content:postInfo.content,link:postInfo.link,linkTitle:postInfo.linkTitle});};var discraptionChanged=function discraptionChanged(e){e.preventDefault();setPostInfo({title:postInfo.title,discraption:e.target.value,picture:postInfo.picture,content:postInfo.content,link:postInfo.link,linkTitle:postInfo.linkTitle});};var pictureChanged=function pictureChanged(e){e.preventDefault();var reader=new FileReader();var inFile=e.target.files[0];reader.onloadend=function(){console.log(1+reader.result);setPostInfo({title:postInfo.title,discraption:postInfo.discraption,picture:reader.result,content:postInfo.content,link:postInfo.link,linkTitle:postInfo.linkTitle});};reader.readAsDataURL(inFile);};var contentChanged=function contentChanged(e){e.preventDefault();setPostInfo({title:postInfo.title,discraption:postInfo.discraption,picture:postInfo.picture,content:e.target.value,link:postInfo.link,linkTitle:postInfo.linkTitle});};var linkChanged=function linkChanged(e){e.preventDefault();setPostInfo({title:postInfo.title,discraption:postInfo.discraption,picture:postInfo.picture,content:postInfo.content,link:e.target.value,linkTitle:postInfo.linkTitle});};var linkTitleChanged=function linkTitleChanged(e){e.preventDefault();setPostInfo({title:postInfo.title,discraption:postInfo.discraption,picture:postInfo.picture,content:postInfo.content,link:postInfo.link,linkTitle:e.target.value});};var cancel=function cancel(){history.push('/manager');};if(localStorage.getItem('userInfo')&&sessionStorage.getItem('loggedIn')){var submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/edit-news',{title:postInfo.title,discraption:postInfo.discraption,content:postInfo.content,picture:postInfo.picture,link:postInfo.link,linkTitle:postInfo.linkTitle,_id:postId,author:JSON.parse(localStorage.getItem(\"userInfo\")).name}).then(function(res){history.push('/manager');toast.success('تم تعديل المنشور',{position:\"top-right\",autoClose:4000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});}).catch(function(err){console.log(err);toast.error('حدث خطأ في الخادم, نرجو المحاولة لاحقًا',{position:\"top-right\",autoClose:4000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(){return _ref2.apply(this,arguments);};}();if(post&&postInfo){return/*#__PURE__*/_jsxs(\"div\",{className:\"addPost\",children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0639\\u0646\\u0648\\u0627\\u0646\"}),/*#__PURE__*/_jsx(\"input\",{onChange:titleChanged,type:\"text\",value:postInfo.title,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0648\\u0635\\u0641\"}),/*#__PURE__*/_jsx(\"input\",{onChange:discraptionChanged,type:\"text\",value:postInfo.discraption,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0635\\u0648\\u0631\\u0629\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:pictureChanged,filenamw:postInfo.picture,className:\"form-control\"}),/*#__PURE__*/_jsx(\"img\",{src:postInfo.picture})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0645\\u062D\\u062A\\u0648\\u0649\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",onChange:contentChanged,value:postInfo.content,className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0627\\u0644\\u0631\\u0627\\u0628\\u0637\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:linkChanged,value:postInfo.link||\"\",className:\"form-control\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0639\\u0646\\u0648\\u0627\\u0646 \\u0627\\u0644\\u0631\\u0627\\u0628\\u0637\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:linkTitleChanged,value:postInfo.linkTitle||\"\",className:\"form-control\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:submit,className:\"btn btn-success form-button\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancel,className:\"btn btn-danger form-button\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]})]});}else{return/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0644\\u0645 \\u064A\\u062A\\u0645 \\u0625\\u064A\\u062C\\u0627\\u062F \\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631 \\u0627\\u0644\\u0630\\u064A \\u062A\\u0628\\u062D\\u062B \\u0639\\u0646\\u0647\"});}}else{return/*#__PURE__*/_jsx(NotAllowed,{});}};export default EditPost;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/editPost.js"],"names":["React","useState","useParams","useHistory","NotAllowed","axios","toast","getPost","id","console","log","post","_id","then","response","data","catch","err","EditPost","history","postId","setPost","postInfo","setPostInfo","res","titleChanged","e","preventDefault","title","target","value","discraption","picture","content","link","linkTitle","discraptionChanged","pictureChanged","reader","FileReader","inFile","files","onloadend","result","readAsDataURL","contentChanged","linkChanged","linkTitleChanged","cancel","push","localStorage","getItem","sessionStorage","submit","author","JSON","parse","name","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","error"],"mappings":"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","sourcesContent":["import  React, { useState } from 'react';\r\nimport {useParams, useHistory} from 'react-router-dom';\r\nimport NotAllowed from './notAllowed';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\nimport './styles.css';\r\n\r\nvar getPost = async(id) => {\r\n    var post;\r\n    console.log(id);\r\n    await axios.post(\"/search\", {_id: id}).then(response => post = response.data).catch(err => console.log(err))\r\n    console.log(post)\r\n    return post;\r\n}\r\n\r\nvar EditPost = () => {\r\n    var history = useHistory();\r\n    var postId = useParams();\r\n    var [post, setPost] = useState();\r\n\r\n    var [postInfo, setPostInfo] = useState();\r\n\r\n    if(!post && !postInfo){getPost(postId.id).then(res => {\r\n        setPost(res);\r\n        setPostInfo(res)\r\n        console.log(postInfo)\r\n    })\r\n}\r\n\r\n    var titleChanged = (e) => {\r\n        e.preventDefault();\r\n        setPostInfo({\r\n            title: e.target.value, \r\n            discraption: postInfo.discraption, \r\n            picture: postInfo.picture, \r\n            content: postInfo.content, \r\n            link: postInfo.link, \r\n            linkTitle: postInfo.linkTitle})\r\n    }\r\n\r\n    var discraptionChanged = (e) => {\r\n        e.preventDefault();\r\n        setPostInfo({\r\n            title: postInfo.title, \r\n            discraption: e.target.value, \r\n            picture: postInfo.picture, \r\n            content: postInfo.content, \r\n            link: postInfo.link, \r\n            linkTitle: postInfo.linkTitle})\r\n    }\r\n    var pictureChanged = (e) => {\r\n        e.preventDefault();\r\n        let reader = new FileReader();\r\n        let inFile = e.target.files[0];\r\n        reader.onloadend = () => {\r\n            console.log(1 + reader.result)\r\n            setPostInfo({\r\n                title: postInfo.title, \r\n                discraption: postInfo.discraption, \r\n                picture: reader.result, \r\n                content: postInfo.content, \r\n                link: postInfo.link, \r\n                linkTitle: postInfo.linkTitle})\r\n    }\r\n    reader.readAsDataURL(inFile);\r\n    }\r\n    var contentChanged = (e) => {\r\n        e.preventDefault();\r\n        setPostInfo({\r\n            title: postInfo.title, \r\n            discraption: postInfo.discraption, \r\n            picture: postInfo.picture, \r\n            content: e.target.value, \r\n            link: postInfo.link,\r\n            linkTitle: postInfo.linkTitle})\r\n    }\r\n    var linkChanged = (e) => {\r\n        e.preventDefault();\r\n        setPostInfo({\r\n            title: postInfo.title, \r\n            discraption: postInfo.discraption,\r\n            picture: postInfo.picture, \r\n            content: postInfo.content, \r\n            link: e.target.value, \r\n            linkTitle: postInfo.linkTitle})\r\n    }\r\n    var linkTitleChanged = (e) => {\r\n        e.preventDefault();\r\n        setPostInfo({\r\n            title: postInfo.title, \r\n            discraption: postInfo.discraption, \r\n            picture: postInfo.picture, \r\n            content: postInfo.content, \r\n            link: postInfo.link, \r\n            linkTitle: e.target.value})\r\n    }\r\n    var cancel = () => {\r\n        history.push('/manager');\r\n    }\r\n    if(localStorage.getItem('userInfo') && sessionStorage.getItem('loggedIn')){\r\n        var submit = async() => {\r\n            await axios.post('/edit-news', {title: postInfo.title, discraption: postInfo.discraption, content: postInfo.content, picture: postInfo.picture, link: postInfo.link, linkTitle: postInfo.linkTitle, _id: postId, author: JSON.parse(localStorage.getItem(\"userInfo\")).name})\r\n                .then(res => {\r\n                    history.push('/manager')\r\n                    toast.success('تم تعديل المنشور', {\r\n                        position: \"top-right\",\r\n                        autoClose: 4000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                        });\r\n                }).catch(err => {\r\n                    console.log(err);\r\n                    toast.error('حدث خطأ في الخادم, نرجو المحاولة لاحقًا', {\r\n                        position: \"top-right\",\r\n                        autoClose: 4000,\r\n                        hideProgressBar: false,\r\n                        closeOnClick: true,\r\n                        pauseOnHover: true,\r\n                        draggable: true,\r\n                        progress: undefined,\r\n                        });\r\n                })\r\n        }\r\n        if(post && postInfo){\r\n            return(\r\n                <div className=\"addPost\">\r\n                    <br />\r\n                    <br />\r\n                    <form>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                العنوان\r\n                            </h4>\r\n                            <input onChange={titleChanged} type=\"text\" value={postInfo.title} className=\"form-control\" />\r\n                        </section>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                الوصف\r\n                            </h4>\r\n                            <input onChange={discraptionChanged} type=\"text\" value={postInfo.discraption} className=\"form-control\" />\r\n                        </section>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                الصورة\r\n                            </h4>\r\n                            <input type=\"file\" onChange={pictureChanged}  filenamw={postInfo.picture} className=\"form-control\" />\r\n                            <img src={postInfo.picture} />\r\n                        </section>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                المحتوى\r\n                            </h4>\r\n                            <textarea type=\"text\" onChange={contentChanged}  value={postInfo.content} className=\"form-control\" />\r\n                        </section>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                الرابط\r\n                            </h4>\r\n                            <input type=\"text\" onChange={linkChanged} value={postInfo.link || \"\"} className=\"form-control\" />\r\n                        </section>\r\n                        <section className=\"section\">\r\n                            <h4>\r\n                                عنوان الرابط\r\n                            </h4>\r\n                            <input type=\"text\" onChange={linkTitleChanged} value={postInfo.linkTitle || \"\"} className=\"form-control\" />\r\n                        </section>\r\n                    </form>\r\n                    <br />\r\n                    <div className=\"\">\r\n                        <button onClick={submit} className=\"btn btn-success form-button\">حفظ</button>\r\n                        <button onClick={cancel} className=\"btn btn-danger form-button\">إلغاء</button>\r\n                    </div>\r\n                </div>\r\n            )\r\n        }\r\n        else{\r\n            return <h1>لم يتم إيجاد المنشور الذي تبحث عنه</h1>\r\n        }\r\n    }\r\n    else{\r\n        return(\r\n            <NotAllowed />\r\n        )\r\n    }\r\n}\r\n\r\nexport default EditPost;"]},"metadata":{},"sourceType":"module"}