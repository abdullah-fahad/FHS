{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from\"react\";import axios from'axios';import{useParams,useHistory}from'react-router-dom';import{toast}from\"react-toastify\";import'./styles.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getTeacher=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var teacher;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(id);_context.next=3;return axios.post(\"/search-teachers\",{_id:id}).then(function(response){return teacher=response.data;}).catch(function(err){return console.log(err);});case 3:console.log(teacher);return _context.abrupt(\"return\",teacher);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getTeacher(_x){return _ref.apply(this,arguments);};}();var EditTeacher=function EditTeacher(){var history=useHistory();var postId=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),teacher=_useState2[0],setTeacher=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),teacherInfo=_useState4[0],setTeacherInfo=_useState4[1];var cancel=function cancel(){return null;};var submit=function submit(){return null;};var pictureChanged=function pictureChanged(e){e.preventDefault();var reader=new FileReader();var inFile=e.target.files[0];reader.onloadend=function(){console.log(1+reader.result);setTeacher({name:teacher.name,passcode:teacher.passcode,picture:reader.result});};reader.readAsDataURL(inFile);};var nameChanged=function nameChanged(e){e.preventDefault();setTeacher({name:e.target.value,passcode:teacher.passcode,picture:teacher.picture});};var passcodeChanged=function passcodeChanged(e){e.preventDefault();setTeacher({name:teacher.name,passcode:e.target.value,picture:teacher.picture});};var cancel=function cancel(){history.push('/manager');};var submit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(teacher);_context2.next=3;return axios.post('/edit-teacher',{name:teacher.name,passcode:teacher.passcode,picture:teacher.picture,classes:teacher.classes,_id:teacherInfo._id}).then(function(res){history.push('/manager');toast.success('تم تعديل بيانات المعلم',{position:\"top-right\",autoClose:4000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(){return _ref2.apply(this,arguments);};}();console.log(postId);if(!teacher&&!teacherInfo){getTeacher(postId.id).then(function(res){setTeacher(res);setTeacherInfo(res);console.log(teacher);});return/*#__PURE__*/_jsx(\"div\",{children:\"\\u0644\\u0645 \\u064A\\u062A\\u0645 \\u0627\\u064A\\u062C\\u0627\\u062F \\u0627\\u0644\\u0645\\u0639\\u0644\\u0648\\u0645\\u0627\\u062A \\u0627\\u0644\\u062A\\u064A \\u062A\\u0628\\u062D\\u062B \\u0639\\u0646\\u0647\\u0627\"});}else if(teacher){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h4\",{children:[\"\\u062A\\u0639\\u062F\\u064A\\u0644 \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \",teacher.name]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0627\\u0644\\u0627\\u0633\\u0645\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:teacher.name,onChange:nameChanged}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0631\\u0645\\u0632 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:teacher.passcode,onChange:passcodeChanged}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{children:\"\\u0627\\u0644\\u0635\\u0648\\u0631\\u0629 \\u0627\\u0644\\u0634\\u062E\\u0635\\u064A\\u0629\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"img\",{className:\"teacher-image\",src:teacher.picture}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",onChange:pictureChanged}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:submit,className:\"btn btn-success form-button\",children:\"\\u062D\\u0641\\u0638\"}),/*#__PURE__*/_jsx(\"button\",{onClick:cancel,className:\"btn btn-danger form-button\",children:\"\\u0625\\u0644\\u063A\\u0627\\u0621\"})]}),/*#__PURE__*/_jsx(\"br\",{})]});}};export default EditTeacher;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/editTeacher.js"],"names":["React","useState","axios","useParams","useHistory","toast","getTeacher","id","console","log","post","_id","then","response","teacher","data","catch","err","EditTeacher","history","postId","setTeacher","teacherInfo","setTeacherInfo","cancel","submit","pictureChanged","e","preventDefault","reader","FileReader","inFile","target","files","onloadend","result","name","passcode","picture","readAsDataURL","nameChanged","value","passcodeChanged","push","classes","res","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport axios from 'axios';\r\nimport {useParams, useHistory} from 'react-router-dom';\r\nimport { toast } from \"react-toastify\";\r\nimport './styles.css';\r\n\r\nvar getTeacher = async(id) => {\r\n    var teacher;\r\n    console.log(id);\r\n    await axios.post(\"/search-teachers\", {_id: id}).then(response => teacher = response.data).catch(err => console.log(err))\r\n    console.log(teacher)\r\n    return teacher;\r\n}\r\n\r\nvar EditTeacher = () => {\r\n    var history = useHistory();\r\n    var postId = useParams();\r\n    var [teacher, setTeacher] = useState();\r\n    var [teacherInfo, setTeacherInfo] = useState();\r\n    var cancel = () => {\r\n        return null;\r\n    }\r\n    var submit = () => {\r\n        return null;\r\n    }\r\n\r\n    var pictureChanged = (e) => {\r\n        e.preventDefault();\r\n        let reader = new FileReader();\r\n        let inFile = e.target.files[0];\r\n        reader.onloadend = () => {\r\n            console.log(1 + reader.result)\r\n            setTeacher({\r\n                name: teacher.name, \r\n                passcode: teacher.passcode, \r\n                picture: reader.result, \r\n            })\r\n    }\r\n    reader.readAsDataURL(inFile);\r\n    }\r\n    \r\n    var nameChanged = (e) => {\r\n        e.preventDefault();\r\n        setTeacher({\r\n            name: e.target.value, \r\n            passcode: teacher.passcode, \r\n            picture: teacher.picture, \r\n        })\r\n    }\r\n    var passcodeChanged = (e) => {\r\n        e.preventDefault();\r\n        setTeacher({\r\n            name: teacher.name, \r\n            passcode: e.target.value, \r\n            picture: teacher.picture, \r\n        })\r\n    }\r\n    var cancel = () => {\r\n        history.push('/manager');\r\n    }\r\n    var submit = async() => {\r\n        console.log(teacher)\r\n        await axios.post('/edit-teacher', {name: teacher.name, passcode: teacher.passcode, picture: teacher.picture, classes: teacher.classes, _id: teacherInfo._id})\r\n            .then(res => {\r\n                history.push('/manager');\r\n                toast.success('تم تعديل بيانات المعلم', {\r\n                    position: \"top-right\",\r\n                    autoClose: 4000,\r\n                    hideProgressBar: false,\r\n                    closeOnClick: true,\r\n                    pauseOnHover: true,\r\n                    draggable: true,\r\n                    progress: undefined,\r\n                    });\r\n            })\r\n    }\r\n\r\n    console.log(postId)\r\n    if(!teacher && !teacherInfo){getTeacher(postId.id).then(res => {\r\n        setTeacher(res);\r\n        setTeacherInfo(res)\r\n        console.log(teacher)\r\n\r\n    })\r\n    return (\r\n        <div>لم يتم ايجاد المعلومات التي تبحث عنها</div>\r\n    )\r\n}\r\n\r\n    else if(teacher){\r\n        return(\r\n            <div>\r\n                <br />\r\n                <br />\r\n                <h4>تعديل بيانات {teacher.name}</h4>\r\n                <br />\r\n                <form>\r\n                    <label>الاسم</label>\r\n                    <input type=\"text\" className=\"form-control\" placeholder={teacher.name} onChange={nameChanged}/>\r\n                    <br />\r\n                    <label>رمز الدخول</label>\r\n                    <input type=\"text\" className=\"form-control\" placeholder={teacher.passcode} onChange={passcodeChanged}/>\r\n                    <br />\r\n                    <label>الصورة الشخصية</label><br />\r\n                    <img className=\"teacher-image\" src={teacher.picture} />\r\n                    <input type=\"file\" className=\"form-control\" onChange={pictureChanged}/>\r\n                    <br />\r\n                <br />\r\n                <br />\r\n                <br />\r\n                    <button type=\"button\" onClick={submit} className=\"btn btn-success form-button\">حفظ</button>\r\n                    <button onClick={cancel} className=\"btn btn-danger form-button\">إلغاء</button>\r\n                </form>\r\n                <br />\r\n            </div>\r\n        )   \r\n    }\r\n}\r\n\r\nexport default EditTeacher;"]},"metadata":{},"sourceType":"module"}