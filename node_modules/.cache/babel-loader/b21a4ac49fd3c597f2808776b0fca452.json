{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{useHistory}from'react-router-dom';import axios from'axios';import'./styles.css';import{toast}from'react-toastify';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getPosts=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var posts;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/get-news\").then(function(response){return posts=response.data;}).catch(function(err){return console.log(err);});case 2:return _context.abrupt(\"return\",posts);case 3:case\"end\":return _context.stop();}}},_callee);}));return function getPosts(){return _ref.apply(this,arguments);};}();var ShowPosts=function ShowPosts(){var history=useHistory();var _useState=useState(),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),reRender=_useState4[0],setReRender=_useState4[1];if(!posts){getPosts().then(function(res){return setPosts(res);});}var prettyPosts=[];var remove=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();_context2.next=3;return axios.post('/remove-news',{_id:posts[e.target.name]._id}).then(function(res){window.location.reload();toast.success('تم حذف المنشور',{position:\"top-right\",autoClose:4000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,draggable:true,progress:undefined});});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function remove(_x){return _ref2.apply(this,arguments);};}();if(posts&&posts.length===0||!posts){return/*#__PURE__*/_jsx(\"div\",{className:\"not-found\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u0623\\u064A \\u0645\\u0646\\u0634\\u0648\\u0631 \\u062D\\u062A\\u0649 \\u0627\\u0644\\u0622\\u0646\"})});}else if(posts){for(var x=posts.length;x>0;x--){console.log(x);prettyPosts.push(/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"post-img\",src:posts[x-1].picture}),/*#__PURE__*/_jsx(\"h3\",{className:\"post-thumb-title\",children:posts[x-1].title}),/*#__PURE__*/_jsxs(\"span\",{className:\"author1\",children:[\"\\u0645\\u0646 \",posts[x-1].author||\"مجهول\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"post-thumb-text\",children:posts[x-1].discraption}),/*#__PURE__*/_jsxs(\"div\",{class:\"btn-group\",children:[/*#__PURE__*/_jsxs(\"button\",{name:x-1,type:\"button\",class:\"btn btn-primary\",onClick:function onClick(e){return history.push(\"/manager/edit-post/\".concat(posts[e.target.name]._id));},children:[\"\\u062A\\u0639\\u062F\\u064A\\u0644 \",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/ios-glyphs/15/ffffff/edit--v1.png\"})]}),/*#__PURE__*/_jsxs(\"button\",{name:x-1,type:\"button\",onClick:function onClick(e){return history.push(\"/comments/\".concat(posts[e.target.name]._id));},class:\"btn btn-secondary\",children:[\"\\u0627\\u0644\\u062A\\u0639\\u0644\\u064A\\u0642\\u0627\\u062A\",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/material-rounded/15/ffffff/comments--v1.png\"})]}),/*#__PURE__*/_jsxs(\"button\",{name:x-1,type:\"button\",onClick:remove,class:\"btn btn-danger\",children:[\"\\u062D\\u0630\\u0641\",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/small/16/ffffff/filled-trash.png\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{name:x-1,className:\"btn btn-success post-btn\",onClick:function onClick(e){history.push(\"/home/\".concat(posts[e.target.name]._id));},children:\"\\u0627\\u0646\\u062A\\u0642\\u0644 \\u0625\\u0644\\u0649 \\u0627\\u0644\\u062E\\u0628\\u0631\"})]}));}return prettyPosts;}};var ManagerPosts=function ManagerPosts(){var history=useHistory();var addPost=function addPost(){history.push('/manager/add-post');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u062D\\u064A\\u062B \\u064A\\u0645\\u0643\\u0646\\u0643 \\u0627\\u0644\\u0625\\u0634\\u0631\\u0627\\u0641 \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631\\u0627\\u062A, \\u062A\\u0639\\u062F\\u064A\\u0644\\u0647\\u0627 \\u0623\\u0648 \\u062D\\u0630\\u0641\\u0647\\u0627 \\u0623\\u0648 \\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u0634\\u0648\\u0631 \\u062C\\u062F\\u064A\\u062F\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:addPost,className:\"btn btn-success\",children:[\"\\u0625\\u0636\\u0627\\u0641\\u0629 \\u0645\\u0646\\u0634\\u0648\\u0631 \",/*#__PURE__*/_jsx(\"img\",{src:\"https://img.icons8.com/ios/20/ffffff/plus--v2.png\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ShowPosts,{})]});};export default ManagerPosts;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/managerPosts.js"],"names":["React","useState","useHistory","axios","toast","getPosts","get","then","response","posts","data","catch","err","console","log","ShowPosts","history","setPosts","reRender","setReRender","res","prettyPosts","remove","e","preventDefault","post","_id","target","name","window","location","reload","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","length","x","push","picture","title","author","discraption","ManagerPosts","addPost"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport {useHistory} from 'react-router-dom';\r\nimport axios from 'axios'\r\nimport './styles.css';\r\nimport { toast } from 'react-toastify';\r\n\r\nvar getPosts = async() => {\r\n    var posts;\r\n    await axios.get(\"/get-news\").then(response => posts = response.data).catch(err => console.log(err))\r\n    return posts;\r\n\r\n}\r\n\r\n\r\n\r\nvar ShowPosts = () => {\r\n    var history = useHistory(); \r\n    var [posts, setPosts] = useState();\r\n    var [reRender, setReRender] = useState();\r\n    if(!posts){getPosts().then(res => setPosts(res))}\r\n    var prettyPosts = []\r\n\r\n    var remove = async e => {\r\n        e.preventDefault();\r\n        await axios.post('/remove-news', {_id: posts[e.target.name]._id}).then(res => {\r\n            window.location.reload();\r\n            toast.success('تم حذف المنشور', {\r\n                position: \"top-right\",\r\n                autoClose: 4000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                draggable: true,\r\n                progress: undefined,\r\n                });\r\n        })\r\n    }\r\n\r\n    if(posts && posts.length === 0 || !posts){\r\n        return (\r\n            <div className=\"not-found\">\r\n                <h1>لا يوجد أي منشور حتى الآن</h1>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    else if(posts){\r\n\r\n        for(var x = posts.length; x > 0; x--){\r\n            console.log(x)\r\n            prettyPosts.push(\r\n                <div className=\"post\">\r\n                    <img className=\"post-img\" src={posts[x-1].picture} /> \r\n                    <h3 className=\"post-thumb-title\">{posts[x-1].title}</h3>\r\n                    <span className=\"author1\">من {posts[x-1].author || \"مجهول\"}</span>\r\n                    <p className=\"post-thumb-text\">{posts[x-1].discraption}</p>\r\n                    <div class=\"btn-group\">\r\n                        <button name={x-1} type=\"button\" class=\"btn btn-primary\" onClick={e => history.push(`/manager/edit-post/${posts[e.target.name]._id}`)}>تعديل <img src=\"https://img.icons8.com/ios-glyphs/15/ffffff/edit--v1.png\"/></button>\r\n                        <button name={x-1} type=\"button\" onClick={e => history.push(`/comments/${posts[e.target.name]._id}`)} class=\"btn btn-secondary\">التعليقات<img src=\"https://img.icons8.com/material-rounded/15/ffffff/comments--v1.png\"/></button>\r\n                        <button name={x-1} type=\"button\" onClick={remove} class=\"btn btn-danger\">حذف<img src=\"https://img.icons8.com/small/16/ffffff/filled-trash.png\"/></button>\r\n                    </div>\r\n                    <br />\r\n                    <br />\r\n                    <button name={x-1} className=\"btn btn-success post-btn\" onClick={(e) => {\r\n                        history.push(`/home/${posts[e.target.name]._id}`);\r\n                        }}>انتقل إلى الخبر</button>\r\n                </div>\r\n            )\r\n        }\r\n        return prettyPosts;\r\n    }\r\n}\r\n\r\nvar ManagerPosts = () => {\r\n    var history = useHistory();\r\n    var addPost = () => {\r\n        history.push('/manager/add-post')\r\n    }\r\n    return(\r\n        <div>\r\n            <h1>المنشورات</h1>\r\n            <p>حيث يمكنك الإشراف على المنشورات, تعديلها أو حذفها أو إضافة منشور جديد</p>\r\n            <button onClick={addPost} className=\"btn btn-success\">إضافة منشور <img src=\"https://img.icons8.com/ios/20/ffffff/plus--v2.png\"/></button>\r\n            <br />\r\n            <ShowPosts />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default ManagerPosts;"]},"metadata":{},"sourceType":"module"}