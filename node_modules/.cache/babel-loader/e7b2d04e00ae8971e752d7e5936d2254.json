{"ast":null,"code":"import _slicedToArray from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React,{useState}from'react';import{useParams}from'react-router-dom';import axios from'axios';import NotAllowed from'./notAllowed';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var post;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(id);_context.next=3;return axios.post(\"/search\",{_id:id}).then(function(response){return post=response.data;}).catch(function(err){return console.log(err);});case 3:console.log(post);return _context.abrupt(\"return\",post);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getPost(_x){return _ref.apply(this,arguments);};}();var removeComment=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id,index){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post('/remove-comment',{id:id,index:index});case 2:window.location.reload();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function removeComment(_x2,_x3){return _ref2.apply(this,arguments);};}();var showComments=function showComments(post){var rawComments=post.comments;var comments=[];if(rawComments.length===0){return/*#__PURE__*/_jsx(\"p\",{className:\"post-view-content\",children:\"\\u0644\\u0627 \\u064A\\u0648\\u062C\\u062F \\u062A\\u0639\\u0644\\u064A\\u0642 \\u062D\\u062A\\u0649 \\u0627\\u0644\\u0622\\u0646\"});}else{for(var x=rawComments.length;x>0;x--){comments.push(/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsx(\"p\",{children:rawComments[x-1]}),/*#__PURE__*/_jsx(\"button\",{name:x-1,onClick:function onClick(e){return removeComment(post._id,1);},className:\"btn btn-outline-danger btn-sm\",children:\"\\u062D\\u0630\\u0641 \\u0627\\u0644\\u062A\\u0639\\u0644\\u064A\\u0642\"})]}));}}return comments;};var Comments=function Comments(){var postId=useParams();var _useState=useState(),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),title=_useState4[0],setTitle=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),comments=_useState6[0],setComments=_useState6[1];if(!post){getPost(postId.id).then(function(res){return setPost(res);});}if(post&&!comments&&!title){setComments(showComments(post));setTitle(post.title);}if(localStorage.getItem('userInfo')&&sessionStorage.getItem('loggedIn')){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u0627\\u0644\\u062A\\u0639\\u0644\\u064A\\u0642\\u0627\\u062A \\u0639\\u0644\\u0649 \\u0627\\u0644\\u0645\\u0646\\u0634\\u0648\\u0631 \",/*#__PURE__*/_jsx(\"a\",{href:\"/home/\".concat(postId.id),children:title})]}),comments]});}else{return/*#__PURE__*/_jsx(NotAllowed,{});}};export default Comments;","map":{"version":3,"sources":["C:/Users/HP/Desktop/Coding/Projects in progress/FHS/server/website/fhs/src/components/comments.js"],"names":["React","useState","useParams","axios","NotAllowed","getPost","id","console","log","post","_id","then","response","data","catch","err","removeComment","index","window","location","reload","showComments","rawComments","comments","length","x","push","e","Comments","postId","setPost","title","setTitle","setComments","res","localStorage","getItem","sessionStorage"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport NotAllowed from './notAllowed';\r\n\r\nvar getPost = async(id) => {\r\n    var post;\r\n    console.log(id);\r\n    await axios.post(\"/search\", {_id: id}).then(response => post = response.data).catch(err => console.log(err))\r\n    console.log(post)\r\n    return post;\r\n}\r\n\r\nvar removeComment = async(id, index) => {\r\n    await axios.post('/remove-comment', {id, index})\r\n    window.location.reload()\r\n}\r\n\r\nvar showComments = (post) => {\r\n    var rawComments = post.comments;\r\n    var comments = [];\r\n    if(rawComments.length === 0){\r\n        return (<p className=\"post-view-content\">لا يوجد تعليق حتى الآن</p>);\r\n    }\r\n    else{\r\n        for(var x = rawComments.length; x > 0; x--){\r\n            comments.push(<div className=\"comment\">\r\n                <p>{rawComments[x - 1]}</p>\r\n                <button name={x-1} onClick={e => removeComment(post._id, 1)} className=\"btn btn-outline-danger btn-sm\">حذف التعليق</button>\r\n            </div>)\r\n        }\r\n    }\r\n    return comments\r\n}\r\n\r\nvar Comments = () => {\r\n    var postId = useParams();\r\n    var [post, setPost] = useState();\r\n    var [title, setTitle] = useState();\r\n    var [comments, setComments] = useState();\r\n    if(!post){getPost(postId.id).then(res => setPost(res))}\r\n    if(post && !comments && !title){setComments(showComments(post)); setTitle(post.title)}\r\n    if(localStorage.getItem('userInfo') && sessionStorage.getItem('loggedIn')){\r\n        return(\r\n            <div>\r\n                <br />\r\n                <br />\r\n                <h3>التعليقات على المنشور <a href={`/home/${postId.id}`}>{title}</a></h3>\r\n                {comments}\r\n            </div>\r\n        );\r\n    }\r\n    else{\r\n        return(\r\n            <NotAllowed />\r\n        )\r\n    }\r\n}\r\n\r\nexport default Comments;"]},"metadata":{},"sourceType":"module"}